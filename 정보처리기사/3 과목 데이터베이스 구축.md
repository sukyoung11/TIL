# 제3과목 데이터베이스 구축

## 01 논리 데이터베이스 설계

### 데이터 베이스 설계

사용자의 요구를 잘 받아들이고, 분석 해서 컴퓨터 구조에 맞게 변형 

고려사항 - 무결성(정확성), 일관성, 회복( 문제 발생 시 직전의 상태로) , 보안, 효율성, 데이터베이스 확장(지속적으로 추가)

설계 순서 - 1. 요구조건 분석 2. 개념적 설계 3. 논리적 설계 4. 물리적 설계 5. 구현

- 요구조건 분석

  사용자가 무엇을 요구하는지 사용자의 조건 파악, 데이터 수집, 명세화 => 요구조건 명세 작성

- 개념적 설계 (정보 모델링, 개념화)

  E-R 다이어그램 ( 개체/속성/관계)

- 논리적 설계 (데이터 모델링)

  개체 - 행위의 주체

  스키마 설계 - 개념 스키마 평가, DBMS 논리적 스키마 설계

- 물리적 설계(데이터 구조화)

  저장 장치

- 데이터베이스 구현

  DDL이용, 응용프로그램을 위한 트랜잭션(DB의 작은 단위) 작성

### 데이터 모델

**정의 - 현실 정보를 단순화, 추상화 시켜 컴퓨터에 표현**

**구성 요소 - 객체 (표현하고자 하는 대상), 속성 (필드), 관계 (개체와 개체사이의 연결)**

개념적 데이터 모델 - 인간적 이해

논리적 데이터 모델 - 컴퓨터가 이해하도록 변환

​                                       품질검증 : 개체, 속성, 관계, 식별자, 전반적인 품질 검증 항목

**데이터 모델에 필요한 요소 - 구조, 연산, 제약 조건**

### 데이터 모델의 구성 요소

- 개체 

  특징 - DB에서 표현하려는 것, 유일한 식별자의 식별 가능, 다른 객체와 관계가 있음

  선정방법 - 회사의 업무 기술서 참조, 인터뷰, 자료 참고, DFD (처리 과정을 도형으로 보여줌)

  개체명 지정 방법 - 업무에서 사용하고 있는 언어 지정, 약어 사용 X, 유일한 개체명 사용

- 속성

  특징 - 데이터 베이스를 구성하는 항목, 가장 작은 단위, 특성

  종류 

  - **특성에 따라 -- 기본 속성(업무 분석), 설계 속성(업무 규칙화), 파생 속성(다른 속성으로 부터 영향, 합계 평균 등)**

  - **구성 방식에 따른 분류 -- 기본키 속성(같은 곳에 있음), 외래키 속성( 다른 개체에 있음), 일반 속성**

​        속성 후보 선정원칙 - 최대한 많이, 적당한 그룹으로 나눔

​        속성명 지정 원칙 - 정확, 혼란 없게 / 서술형X 약어X 실제 사용하는 언어로

- 관계 

  정의 - 논리적 연결

  형태 - 일대일, 일대다, 다대다, 일대일 또는 일대영

  종류 - 종속관계(식별과 비식별) , 중복관계 (두번 이상 종속 발생), 재귀관계 (자기 자신을 다시 참조), 

  ​           배타관계(개체의 속성이나 구분자를 기준으로 분리 - 베타AND(객체 중복 불가능), 베타OR)

### 식별자

모든 개체는 하나 이상의 식별자를 가짐 

- 대표성여부 - 주 식별자(개체를 대표하는 유일한 식별자, 힌개만 존재) , 보조 식별자(주식별자 대신, 여러개 가능) => 둘다 유일 식별, 주식별 자의 4가지 특징: **유일성(null 안됨), 최소성, 불변성, 존재성**

- 스스로 식별 여부 - 내부 식별자(개체 내), 외부 식별자 ( 다른 개체와 관계, 다른 테이블 참조)
- **단일 속성 여부 - 단일 식별자(1개의 속성) , 복합 식별자(2개 이상의 속성)**
- 대체 여부 - 원조 식별자 (가공 되지 않은 식별자), 대리 식별자(속성이 2개 이상일 때 하나로 묶어서 새로운 식별자로)
- **후보 식별자 - 각 개체에서  각 인스턴스를 유일하게 식별할 수 있는 속성**

​                                **1개 이상의 후보 식별자 존재, 널 값은 X, 자주 변경하지 않기**





### E-R 다이어그램

개체와 속성, 관계를 그림으로 설명

시스템에 영향을 받지 않음

여러 형태의 관계를 확인 가능

설계 변경이 거의 발생하지 않음 데이터 중심의 설계가 가능

하나의 개체가 물리적으로 하나의 테이블이 되는 것은 아님



표기법 - 

피터 첸 표기법 (네모-객체 마름모-관계 동그라미-속성 )

바커 표기법(개체- 소프트박스/개체명 상단에 밑으로는 속성 ) 

정보 공학 표기법 (회원번호 아이디 비번 이름)

​               실선과 점선(선택적)



이거 그림으로 그리기!!!!! (바커랑 정보공학)



### 논리 데이터 모델 품질 검증

완전성 - 업무에 필요한 모든 데이터가 정의되어 있는지

중복 배재 - 동일한 사실은 한번만 기록

업무 규칙 - 업무 규칙을 데이터 모델에 반영, 데이터 모델을 통한 업무 규칙 파악

통합성 - 중복데이터는 공유 데이터로 변환

간결성

안전성 및 확장성

정확성 - 표기법에 따라 정확히 표기

완전성 - 누락 최소화

준거성 - 데이터 표준화, 규칙 준수

최신성 - 최신 상태 반영

일관성 - 공통 사용되는 데이터는 한번만 정의

활용성 - 유연하게 설계 되어 있는지



### 관계형 데이터 베이스

개체와 관계를 표로 표현, 간결하고 보기 편한데 성능은 떨어짐

관계형 데이트 베이스의 relation(표)  구조

- 표의 첫 행 -릴레이션 스키마 (전체 속성명의 집합)

- 데이터 전체 - 릴레이션 인스턴스 - 실제로 형성된 객체

- 세로줄(열) - **속성** -(db를 구성하는 가장 작은 논리적 단위, 필드) -->속성의 개수 = **차수**(degree)

- 가로줄(행) - **튜플**--> 튜플의 개수 = **기수**(카디날리티)
- 도메인 - 속성이 취할 수 있는 값(학년의 도메인은 1,2,3,4,5,6)

관계형 db의 특징

- 중복없는 튜플, 튜플은 모두 다름

- 순서 없는 튜플과 속석

- 계속 변하는 릴레이션 - 계속해서 추가,수정 가능

- 속성의 명칭은 유일 - 속성 명 겹치면 안돼

- 값은 중복 가능, 원자값만 저장



속성의 한 부분을 key로 설정

### key

속성의 한 부분을 key로 설정, 튜플을 찾을 때

논리 모델의 식별자와 같은 개념

- 후보키 - 유일하게 식별 가능 (슈퍼키 중에 가장 속성이 작은것) --> 유일성. 최소성
- 슈퍼키 - 튜플을 유일하게 구분하는 키 --> 유일성만 만족
- 기본키 - 후보티 중 1개 선택
- 대체키 - 후보티에서 기본티 제외한것
- 외래키 - 다른 테이블의 기본값 참조, 외래키는 널이어도 괜춘



### 데이터 베이스 무결성

데이터가 오염되지 않도록! 정확한 데이터, 저장된 값과 현재의 데이터가 일치해야함

- 개체 무결성 (기본키)

  개체(테이블)를 사용(데이블 참조)하는데 문제가 없어야함 - 즉, 데이블의 기본키를 참조하는데 문제가 없어야함, 중복이나 널값이 있으면 안됨

- 도메인 무결성 

  특정 필드의 데이터 영역에 문제가 없어야함 (ex성별필드에 다른값)

- 참조 무결성 (외래키)

  데이터를 가져올 때 문제가 없어야함 (다른 테이블에서 참조할 수 있는 값만!, 널값은 허용)

무결성 강화 방법

- 어플리케리션 - 데이터 조작시 무결성을 검증하는 코드 작성

- 데이터베이스 트리거 - 데이터 조작이 발생하는 시점마다 무결성을 검증하는 절차형 sql작성

- 제약 조건 지정 - 데이터 베이스 자체에 제약 조건 설정



### 관계 대수

새로운 관계를 구축하기 위한 연산자의 모음

#### 순수 관계 연산자 

- select - 특정 조건을 만족하는 새로운 릴레이션 생성, 튜플 개수 변환(수평연산),시그마 기호

​                     ex) 학생 릴레이션에서 점수가 90점 이상인 튜플을 검색하시오

- project - 지정된 속성을 추출해서 새로운 릴레이션 생성,속성 개수 변환(수직연산) ,파이 기호

  ​               ex) 학생 릴레이션에서 과목과 점수를 검색하시오

- join - 공통의 속성을 기준으로 두 릴레이션을 합친 새로운 릴레이션 생성, 리본 기호

- natural join - 조건을 사용하지 않고 공통 속성만 나타남, 속성이 합쳐짐, 공통 속성의 이름과 도메인이 같아야함

- division - 대상 릴레이션에서 조건을 만족하는 튜플 구하는데 그 조건은 제외하고 나타냄, 나누기 기호

  ​               ex) 고객/골드는 고객 릴레이션에서 등급이 골드인 행을 찾은 후 등급 속성을 제외하고 나타냄

  #### 일반 집합 연산자

합집합, 교집합, 차집합, 교차곱(x곱하기)



### 관계해석

어떻게가 아니라 무엇을, **술어해석에 기반, 비절차적인 방식**

관계대수 - 절차적인 언어

관계해석 - 비절차적, 결과만 중요

**관계해석 종류 - 튜플 관계해석, 도메인 관계 해석**





### 데이터 베이스 정규화

정규화 - 논리 데이터 모델링을 분리, 정규화를 통해 품질/ 성능이 향상, 이상 현상을 막을 수 있고 저장공간 최대화 정확

삽입 이상, 삭제 이상, 갱신 이상



정규화 단계

1차 정규화 - 반복 그룹 제거(중복데이터 제거)-새 식별자를 추가해 식별자들의 유일성을 해치지 않도록 함, 모든 도메인이 원자값

2차 정규화- 부분 함수적 종속성 제거

3차 정규화 - 이행적 종속성 제거(X>Y>Z)

BCNF - 결정자가 모두 후보키

4차 정규화 - 다치 종속 제거( 둘 이상의 같은 원자값이 종속)

5차 정규화 - 조인종속 이용



반정규화

시스템 편리성을 위해 정규화 된 것을 다시 통합

성능, 관리 좋아지지만 일관성 떨어질수도...

- 데이블 통합
- 테이블 분할 - 수평분할/수직분할
- 중복 테이블 추가 - 정규화를 했는데 수행 속도가 느려졌을 때, 집게 테이블 추가/진행테이블투가
- 중복 속성 추가 - 경로단축

### 시스템 카탈로그

DBMS가 스스로 생성하고 유지하는 테이블 집합체

자료사전에 저장

카탈로그에 저장된 정보 - 메타데이터

사용자 - 검색가능, 수정 불가능





### 시스템 조사 및 분석

비즈니스 도메인과 명명 규칙

도메인 - 데이터의 타입과 크기에 대한 제약

데이터 사전 - 업무, 프로젝트 등에서 사용하는 용어를 근거로 작성, (논리적 이름-물리적 이름-용어정의)

데이터 명명 규칙 -데이터 용어 사전을 참고하여 파악, 논리명에서 물리명 전환 시 명칭 부여의 근거 중복등의 혼란 방지

시스템 윤영 체계 및 지원

하드웨어

os 및 dbms

매개변수 - 객체 간 값을 주고 받는 역할





## 물리 데이터 베이스 설계

논리적 데이터 베이스를 디스크 등 물리적 저장장치에 저장할 수 있는 물리적 구조의 데이터로 변환하는 과정



